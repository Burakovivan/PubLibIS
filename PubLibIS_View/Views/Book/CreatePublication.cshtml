@model ViewModels.PublishedBookViewModel



<td>
    @Html.HiddenFor(model => model.Book.Id)
    @Html.DropDownListFor(model => model.PublishingHouse.Id, Model.PublishingHouseSelectList, new { @class = "form-control " })
    @Html.ValidationMessageFor(model => model.PublishingHouse.Id, "", new { @class = "text-danger" })
</td>
<td>
    @Html.EditorFor(model => model.DateOfPublication, new { htmlAttributes = new { @class = "form-control input-sm", type = "text" } })
    @Html.ValidationMessageFor(model => model.DateOfPublication, "", new { @class = "text-danger" })
</td>
<td>
    @Html.EditorFor(model => model.Volume, new { htmlAttributes = new { @class = "form-control input-sm" } })
    @Html.ValidationMessageFor(model => model.Volume, "", new { @class = "text-danger" })
</td>
<td>
    <div id="submit-publication" class="btn btn-default btn-sm  controls"><span class="glyphicon glyphicon-plus"></span></div>
</td>

<script>

    $('#PublishingHouse_Id').ready($('#PublishingHouse_Id').chosen());
    $('#DateOfPublication').ready($('#DateOfPublication').datepicker({
        format: "dd.mm.yyyy",
    }));

    $('#submit-publication').ready($('#submit-publication').click(function (e) {
        e.preventDefault();
        var publication = {
            Book_Id: $("#Book_Id").val(),
            PublishingHouse_Id: $("#PublishingHouse_Id").val(),
            DateOfPublication: $("#DateOfPublication").val(),
            Volume: $("#Volume").val()
        };
        $.ajax({
            url: '/book/CreatePublication',
            dataType: "json",
            data: publication,
            type: 'POST',
            cache: false,
            complete: function () {
                $('#publication-list').load('@Url.Action("PublicationList", new { id = Model.Book.Id })');
            }
        });
        })
    );
</script>




